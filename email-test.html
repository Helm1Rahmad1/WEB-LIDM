<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Test</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        button { padding: 10px 20px; margin: 10px; background: #147E7E; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #0f6b6b; }
        .result { margin: 20px 0; padding: 10px; background: #f5f5f5; border-radius: 5px; }
        input { padding: 10px; width: 300px; margin: 10px; border: 1px solid #ddd; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>üß™ Email API Test</h1>
    
    <div>
        <h3>Test Resend Verification</h3>
        <input type="email" id="emailInput" placeholder="Enter email address" value="test@example.com">
        <br>
        <button onclick="testResendVerification()">Test Resend Verification</button>
    </div>

    <div>
        <h3>Test Email Verification</h3>
        <input type="text" id="tokenInput" placeholder="Enter verification token" value="test123">
        <br>
        <button onclick="testVerifyEmail()">Test Verify Email</button>
    </div>

    <div id="result" class="result">
        <strong>Results will appear here...</strong>
    </div>

    <script>
        const resultDiv = document.getElementById('result');
        
        function showResult(title, data, error = false) {
            const color = error ? '#ff6b6b' : '#51cf66';
            resultDiv.innerHTML = `
                <strong style="color: ${color}">${title}</strong>
                <pre>${JSON.stringify(data, null, 2)}</pre>
            `;
        }

        async function testResendVerification() {
            const email = document.getElementById('emailInput').value;
            
            if (!email) {
                showResult('‚ùå Error', 'Please enter an email address', true);
                return;
            }

            try {
                showResult('üîÑ Testing...', 'Sending resend verification request...');
                
                const response = await fetch('http://localhost:3001/auth/resend-verification', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ email }),
                });

                const data = await response.json();
                
                if (response.ok) {
                    showResult('‚úÖ Resend Verification Success!', {
                        status: response.status,
                        message: data.message,
                        email: email
                    });
                } else {
                    showResult('‚ùå Resend Verification Error', {
                        status: response.status,
                        error: data.error,
                        email: email
                    }, true);
                }
            } catch (error) {
                showResult('‚ùå Network Error', {
                    error: error.message,
                    email: email
                }, true);
            }
        }

        async function testVerifyEmail() {
            const token = document.getElementById('tokenInput').value;
            
            if (!token) {
                showResult('‚ùå Error', 'Please enter a verification token', true);
                return;
            }

            try {
                showResult('üîÑ Testing...', 'Sending verify email request...');
                
                const response = await fetch(`http://localhost:3001/auth/verify-email?token=${token}`, {
                    method: 'GET',
                });

                const data = await response.json();
                
                if (response.ok) {
                    showResult('‚úÖ Verify Email Success!', {
                        status: response.status,
                        message: data.message,
                        token: token
                    });
                } else {
                    showResult('‚ùå Verify Email Error', {
                        status: response.status,
                        error: data.error,
                        token: token
                    }, true);
                }
            } catch (error) {
                showResult('‚ùå Network Error', {
                    error: error.message,
                    token: token
                }, true);
            }
        }
    </script>
</body>
</html>